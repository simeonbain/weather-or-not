import{c as v,a as W,u as U,b as H,j as t,F as g,r as y,d,R as z,e as k,P as F}from"./vendor.4fe55f6b.js";const P=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}};P();const m={UMBRELLA:"umbrella",BEANIE:"beanie",SUNNIES:"sunnies",SNOWBOARD:"snowboard"},Z={name:m.UMBRELLA},O=v({name:"item",initialState:Z,reducers:{changeItem:(e,a)=>{e.name=a.payload}}}),{changeItem:w}=O.actions;var K=O.reducer;const V={dataAvailable:!1,data:{today:{},forecast:[]}},R=v({name:"weather",initialState:V,reducers:{setWeatherData:(e,a)=>{a.payload!==null?(e.data=a.payload,e.dataAvailable=!0):e.dataAvailable=!1}}}),{setWeatherData:I}=R.actions;var j=R.reducer;const Y={data:{}},T=v({name:"location",initialState:Y,reducers:{setLocationData:(e,a)=>{a.payload!==null?e.data=a.payload:e.data={}}}}),{setLocationData:S}=T.actions;var q=T.reducer;const G={isAppInStartup:!0},x=v({name:"app",initialState:G,reducers:{setStartup:(e,a)=>{e.isAppInStartup=a.payload}}}),{setStartup:Q}=x.actions;var X=x.reducer;const J=W({reducer:{app:X,item:K,weather:j,location:q}});const C=()=>U(),h=H;var _="/weather-or-not/assets/umbrella.4801f9f1.svg",ee="/weather-or-not/assets/beanie.1d94f242.svg",te="/weather-or-not/assets/sunglasses.03f14bba.svg",ae="/weather-or-not/assets/snowboard.c563d2e1.svg";function M(e){const{itemName:a}=e;return t(g,{children:t("img",{src:(n=>{switch(n){case m.UMBRELLA:return _;case m.BEANIE:return ee;case m.SUNNIES:return te;case m.SNOWBOARD:return ae;default:return _}})(a),alt:a})})}function re(){const e=C(),[a,r]=y.exports.useState(!1),[n,i]=y.exports.useState([m.UMBRELLA,m.BEANIE,m.SUNNIES,m.SNOWBOARD]),s=h(l=>l.item.name),u=l=>{const o=l.currentTarget.dataset.item;if(window.matchMedia("(min-width: 650px)").matches)o&&e(w(o)),r(!1);else{a&&o&&e(w(o));const f=n.slice().sort(N=>N===o?-1:1);i(f),r(!a)}};return t(g,{children:n.map(l=>{let o="items-dropdown__item";return l===s?o=o+" items-dropdown__selected-item":a||(o=o+" items-dropdown__hidden-items"),t("button",{className:o,"data-item":l,onClick:u,children:t(M,{itemName:l})},l)})})}const $={OPEN_WEATHER_API_KEY:"6bbf5e86801ade7a6dfde4f3411a49ca"};async function ne(e){const a=await fetch(`https://api.openweathermap.org/geo/1.0/direct?q=${e}&limit=1&appid=${$.OPEN_WEATHER_API_KEY}`);if(!a.ok){const n=`An error occured: ${a.status}`;throw new Error(n)}const r=await a.json();return{lat:r[0].lat,lon:r[0].lon,name:r[0].name,state:r[0].state,countryCode:r[0].country}}async function se(e,a){const r=await fetch(`https://api.openweathermap.org/data/2.5/onecall?lat=${e}&lon=${a}&units=metric&exclude=minutely,hourly,alerts&appid=${$.OPEN_WEATHER_API_KEY}`);if(!r.ok){const s=`An error occured: ${r.status}`;throw new Error(s)}const n=await r.json(),i=oe(n);return{today:i.today,forecast:i.forecast}}function oe(e){const a={currentTemp:Math.round(e.current.temp),maxTemp:Math.round(e.daily[0].temp.max),minTemp:Math.round(e.daily[0].temp.min),conditions:e.current.weather[0].main.toLowerCase(),isDaytime:e.current.dt>e.current.sunrise&&e.current.dt<e.current.sunset},r=e.daily.map(n=>{const i=n.dt,s=new Date(i*1e3);return{dayName:ie(s),temp:Math.round(n.temp.max),conditions:n.weather[0].main.toLowerCase()}});return r.shift(),{today:a,forecast:r}}function ie(e){switch(e.getDay()){case 0:return"Sunday";case 1:return"Monday";case 2:return"Tuesday";case 3:return"Wednesday";case 4:return"Thursday";case 5:return"Friday";case 6:return"Saturday";default:return}}function ce(){const e=C(),[a,r]=y.exports.useState(""),n=h(u=>u.app.isAppInStartup);return t("div",{className:"location",children:d("form",{onSubmit:u=>{u.preventDefault();const l=a;(async()=>{try{const o=await ne(l);if(o.lat&&o.lon){const p=await se(o.lat,o.lon);e(S(o)),e(I(p)),n&&e(Q(!1)),r(l)}}catch(o){e(S(null)),e(I(null)),r(l),console.log(o)}})(),r("Finding...")},children:[t("h3",{children:"LOCATION"}),t("input",{name:"location",type:"text",value:a,onChange:u=>{r(u.target.value)}}),t("button",{type:"submit",children:"\u21E2"})]})})}function de(){const e=h(a=>a.item.name);return d(g,{children:[d("div",{className:"header__top",children:[d("div",{className:"header__title",children:[t("h1",{children:"WEATHER OR NOT"}),t("div",{className:"header__subtitle",children:d("p",{children:["to bring ",t("br",{}),"your ",t("b",{children:e})]})})]}),t("div",{className:"header__items-dropdown",children:t(re,{})})]}),t("div",{className:"header__bottom",children:t(ce,{})})]})}function le(){return d("div",{className:"start-screen",children:[d("h1",{children:["Welcome to \xA0 ",t("b",{children:"WEATHER OR NOT"})," \xA0 \u{1F642}"]}),d("h2",{children:["Enter a \xA0"," ",t("b",{children:t("i",{children:"location"})})," ","\xA0 and select an \xA0"," ",t("b",{children:t("i",{children:"item"})})," ","\xA0 above to get started"]})]})}var ue="/weather-or-not/assets/clear-day.3a0993a8.svg",me="/weather-or-not/assets/clear-night.c53d60ed.svg",he="/weather-or-not/assets/drizzle.58caa9a8.svg",E="/weather-or-not/assets/dust-day.7529a333.svg",b="/weather-or-not/assets/dust-night.fe821dbb.svg",pe="/weather-or-not/assets/haze-day.7616cfb8.svg",fe="/weather-or-not/assets/haze-night.9f29215b.svg",D="/weather-or-not/assets/mist.1ceed0d9.svg",ve="/weather-or-not/assets/partly-cloudy-day.b3492515.svg",ge="/weather-or-not/assets/partly-cloudy-night.913f5b80.svg",Ne="/weather-or-not/assets/rain.b29c1ccf.svg",ye="/weather-or-not/assets/smoke-particles.cf01c08a.svg",Ae="/weather-or-not/assets/smoke.0d6e0861.svg",we="/weather-or-not/assets/snow.0e5d9432.svg",Ie="/weather-or-not/assets/thunderstorms-day-rain.f7f7b7a3.svg",Se="/weather-or-not/assets/thunderstorms-night-rain.b4529bd2.svg",_e="/weather-or-not/assets/tornado.72902715.svg",L="/weather-or-not/assets/wind.dd7f7b88.svg",Ee="/weather-or-not/assets/not-available.b29dee90.svg";const c={ASH:"ash",CLEAR:"clear",CLOUDS:"clouds",DRIZZLE:"drizzle",DUST:"dust",FOG:"fog",HAZE:"haze",MIST:"mist",RAIN:"rain",SAND:"sand",SMOKE:"smoke",SNOW:"snow",SQUALL:"squall",THUNDERSTORM:"thunderstorm",TORNADO:"tornado",WIND:"wind",NOT_AVAILABLE:"n/a"};function A(e){const{conditionsName:a,isDaytime:r}=e,n=(i,s=!0)=>{switch(i){case c.CLEAR:return s?ue:me;case c.CLOUDS:return s?ve:ge;case c.DRIZZLE:return he;case c.DUST:return s?E:b;case c.FOG:return D;case c.HAZE:return s?pe:fe;case c.MIST:return D;case c.RAIN:return Ne;case c.ASH:return ye;case c.SAND:return s?E:b;case c.SMOKE:return Ae;case c.SNOW:return we;case c.SQUALL:return L;case c.THUNDERSTORM:return s?Ie:Se;case c.TORNADO:return _e;case c.WIND:return L;default:return Ee}};return t(g,{children:t("img",{src:r!==void 0?n(a,r):n(a),alt:a})})}function B(e,a,r,n=!0){switch(e){case m.UMBRELLA:return[c.RAIN,c.DRIZZLE,c.THUNDERSTORM].includes(r);case m.BEANIE:return a<18;case m.SUNNIES:return r===c.CLEAR&&n;case m.SNOWBOARD:return r===c.SNOW;default:return!1}}function be(){var s,u,l;const e=h(o=>o.item.name),[a,r,n]=h(o=>[o.weather.dataAvailable,o.weather.data.today,o.location.data]),i=(o,p,f,N=!0)=>`${B(o,p,f,N)?"You'll need your":"You don't need your"} ${o} \xA0 - \xA0 it's ${p}\xB0C ${f===c.CLEAR?"and":"with"} ${f} right now`;return a?d("div",{className:"today",children:[t("div",{className:"today__icon",children:t(A,{conditionsName:(s=r.conditions)!=null?s:c.NOT_AVAILABLE,isDaytime:(u=r.isDaytime)!=null?u:!0})}),d("h3",{className:"today__location",children:[(l=n.name)!=null?l:"",n.state?`, ${n.state}`:"",n.countryCode?`, ${n.countryCode}`:""]}),t("h2",{children:r.currentTemp!==void 0&&r.conditions?i(e,r.currentTemp,r.conditions,r.isDaytime):""}),t("div",{className:"today__divider"}),d("div",{className:"today__minmax",children:[d("div",{className:"today__minmax__min",children:[t("h3",{children:"MIN"}),d("h2",{children:[r.minTemp,"\xB0C"]})]}),d("div",{className:"today__minmax__max",children:[t("h3",{children:"MAX"}),d("h2",{children:[r.maxTemp,"\xB0C"]})]})]})]}):t("div",{className:"today",children:t("div",{className:"today__icon",children:t(A,{conditionsName:c.NOT_AVAILABLE})})})}function De(){const e=h(n=>n.item.name),[a,r]=h(n=>[n.weather.dataAvailable,n.weather.data.forecast]);return a?t("div",{className:"forecast",children:r.map(n=>d("div",{className:"day",children:[t("div",{className:B(e,n.temp,n.conditions)?"day__item--active":"day__item--inactive",children:t(M,{itemName:e})}),t("h3",{children:n.dayName.toUpperCase()}),d("h2",{className:"day__temp",children:[n.temp,"\xB0C"]}),t("div",{className:"day__condition",children:t(A,{conditionsName:n.conditions})})]},n.dayName))}):t("h2",{className:"forecast--error",children:"Weather data couldn't be found for that location"})}function Le(){const e=h(a=>a.app.isAppInStartup);return d("div",{className:"App",children:[t(de,{}),t("div",{className:e?"start-screen":"hidden",children:t(le,{})}),d("div",{className:e?"hidden":"main",children:[t("div",{className:"main__today",children:t(be,{})}),t("div",{className:"main__divider"}),t("div",{className:"main__forecast",children:t(De,{})})]})]})}z.render(t(k.StrictMode,{children:t(F,{store:J,children:t(Le,{})})}),document.getElementById("root"));
